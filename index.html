<!DOCTYPE html>
<html>
<head>
  <title>Providense</title>
  <script type="text/javascript" src="js/HexagonTools.js"></script>
  <script type="text/javascript" src="js/Grid.js"></script>
  <script type="text/javascript" src="js/HexCalcs.js"></script>
  <script type="text/javascript" src="node_modules/jquery/dist/jquery.js"></script> 
  <script type="text/javascript" src="js/notify.min.js"></script>
  <style>
    canvas {
      border: 1px solid black;
      width: 70%;
    }
    
  </style>
</head>
<body>

 <!-- <h3>Hex Based on Width and Height</h3>
  Width:<br />
  <input type="text" id="hexWidth" value="100.0" /><br />
  Height:<br />
  <input type="text" id="hexHeight" value="86.60254037844388" /><br />
  <input type="button" onclick="getHexGridWH()" value="Draw Hex Grid by Width and Height"/>
  
  <div id="hexStatus"></div>
-->
  <div>
  <button onclick="setColor('red')">Red</button>
  <button onclick="setColor('blue')">Blue</button>
  <button onclick="setColor('green')">Green</button>
  <button onclick="setColor('yellow')">Yellow</button>
  </div>
  <canvas id="hexCanvas" width="800" height="600" style="width:800px;height:600px" />
  
  <script>
    var color = "white";
    var any_selected = false;
    function setColor(choice){
      color = choice.toString();
    }
    window.addEventListener("load", function() {
      var canvas = document.getElementById("hexCanvas");
      getHexGridWH();
      
      var grid = new HT.Grid(800, 600);
      //console.log(grid.Hexes);
      
      function getCursorPosition(canvas, event) {
        const rect = canvas.getBoundingClientRect()
        const x = event.clientX - rect.left
        const y = event.clientY - rect.top
      }
      
      //draw hex at click
     // canvas.addEventListener("mouseup", function(e){
     //   getCursorPosition(canvas, e)
     //   addHex("G5", e.x-55, e.y-50);
     // });
      canvas.addEventListener("mouseup", function(e) {
        getCursorPosition(canvas, e);
        var p = new HT.Point(e.x-24, e.y-24);
        //var p = new HT.Point(e.x-55, e.y-50);
        //console.log(grid.GetHexAt(p))
        //if (Hexes.forEach(firstClick()) = )
        //addHex(grid.GetHexAt(p).Id, grid.GetHexAt(p).TopLeftPoint.X, grid.GetHexAt(p).TopLeftPoint.Y);
        //if (color != "white") {
        //  grid.GetHexAt(p).selected = true;
        //};
        anySelected(p);
        grid.CheckNeighbors(p);
        
        
        
      });
      // checks if any hexes have been clicked yet
      anySelected = function(p) {
        if (any_selected == true) {
          if (grid.CheckNeighbors(p) == true) {
            addHex(grid.GetHexAt(p).Id, grid.GetHexAt(p).TopLeftPoint.X, grid.GetHexAt(p).TopLeftPoint.Y);
            grid.GetHexAt(p).selected = true;
          }
          return true;
        }  else if (color != "white") {
          any_selected = true;
          addHex(grid.GetHexAt(p).Id, grid.GetHexAt(p).TopLeftPoint.X, grid.GetHexAt(p).TopLeftPoint.Y);
          grid.GetHexAt(p).selected = true;
        } else {
          $(document).ready(function(){
            $.notify("Please select a color" , { position:"top center"  } );
          })
        }
      }
      
      
      
      
      addHex = function(name, x, y) {
        var hex = new HT.Hexagon(name, x, y);
        hex.draw(canvas.getContext("2d"), color);
      }
      //function firstClick(selected){
      //  if selected = true {
      //    return true;
      //  } else {
      //    return false;
      //  }
      //};
      
    
     
  })
  </script>
</body>
</html>